\hypertarget{_o_r_c_t_8cpp_source}{}\doxysection{ORCT.\+cpp}
\mbox{\hyperlink{_o_r_c_t_8cpp}{Go to the documentation of this file.}}
\begin{DoxyCode}{0}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00001}00001 \textcolor{preprocessor}{\#include "{}\mbox{\hyperlink{_o_r_c_t_8h}{ORCT.h}}"{}}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00002}00002 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespacefdpot}{fdpot}}\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00003}00003 }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00004}00004 \textcolor{keyword}{template}<>}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00005}\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a10b59b48c9c5fd691a1f28d8340b8109}{00005}} \textcolor{keywordtype}{double} ORCT::cdf<double>(\textcolor{keyword}{const} \textcolor{keywordtype}{double} x)\textcolor{keyword}{ const }\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00006}00006   \textcolor{keywordflow}{return} 1 / (1 + std::exp(-\/x * this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a1600234ee4806db06cf6e0d5d2d90b44}{gamma}}));}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00007}00007 \}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00008}00008 }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00009}\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a8e58ede4ab4994c4abaa469e5f08b629}{00009}} \textcolor{keywordtype}{void} \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a8e58ede4ab4994c4abaa469e5f08b629}{ORCT::create\_structure}}(\textcolor{keywordtype}{void})\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00010}00010   \textcolor{comment}{// map for the left parent and right parent nodes}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00011}00011   \textcolor{comment}{// bijection for variables }}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00012}00012   this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}.resize(this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_af4178d8704ab05d9ffd99debc4a06dae}{n\_nodes}});}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00013}00013   }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00014}00014 \textcolor{preprocessor}{\#ifndef MYNDEBUG}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00015}00015   std::cout << \textcolor{stringliteral}{"{}Structure size is: "{}} << \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}.size() << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00016}00016 \textcolor{preprocessor}{\#endif }}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00017}00017   }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00018}00018   \textcolor{comment}{//  structure.push\_back(std::make\_pair(std::vector<unsi))}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00019}00019   \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[0] = std::make\_pair(std::vector<unsigned>(), std::vector<unsigned>());  }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00020}00020   \textcolor{comment}{// the current node we will edit}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00021}00021   \textcolor{keywordtype}{unsigned} node = 1;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00022}00022   }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00023}00023   \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} level = 1; level <= \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_abd371e5e2d9bceb3a4d68aabf47baca9}{depth}}; level++)\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00024}00024     \textcolor{comment}{// first node index of previous level coincides with the numbe\(\backslash\)\(\backslash\)r of nodes}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00025}00025     \textcolor{comment}{// of its anterior level's number of nodes}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00026}00026     \textcolor{keywordtype}{unsigned} prev\_idx  = \mbox{\hyperlink{namespacehelpers_a331b84e490c38d25e36a9738d0c809c5}{helpers::n\_nodes}}(level -\/ 2);}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00027}00027     \textcolor{comment}{// expand from each node of previous level}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00028}00028     \textcolor{keywordflow}{for} (\textcolor{keywordtype}{unsigned} j = prev\_idx; j < \mbox{\hyperlink{namespacehelpers_a331b84e490c38d25e36a9738d0c809c5}{helpers::n\_nodes}}(level -\/ 1); j++)\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00029}00029       \textcolor{comment}{// extract ancestors of left and right nodes}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00030}00030       \textcolor{keyword}{auto} left\_nodes = std::vector<unsigned>(\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[j].first.cbegin(), }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00031}00031                                               \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[j].first.cend());}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00032}00032       \textcolor{keyword}{auto} right\_nodes = std::vector<unsigned>(\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[j].second.cbegin(),}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00033}00033                                                \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[j].second.cend());}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00034}00034       \textcolor{comment}{// TODO initialise with zeroes to allocate space}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00035}00035       \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node] = std::make\_pair(left\_nodes, right\_nodes);}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00036}00036       \textcolor{comment}{// since we went to the left, j is a left parent node, so update first}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00037}00037       \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].first.push\_back(j);  }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00038}00038       std::cout << \textcolor{stringliteral}{"{}Node "{}} << node  << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00039}00039       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} v: \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].first)}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00040}00040         std::cout << \textcolor{stringliteral}{"{}left parent value "{}}  << v << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00041}00041       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} v: \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].second)}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00042}00042         std::cout << \textcolor{stringliteral}{"{}right parent value "{}}  << v << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00043}00043       node++;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00044}00044 }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00045}00045       \textcolor{comment}{// go right}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00046}00046       \textcolor{comment}{// now we use move since we won't need the vecs anymore, and we save }}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00047}00047       \textcolor{comment}{// some computations}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00048}00048       \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node] = std::make\_pair(std::move(left\_nodes), std::move(right\_nodes));}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00049}00049       \textcolor{comment}{// we went to the right, update second}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00050}00050       \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].second.push\_back(j);}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00051}00051       std::cout << \textcolor{stringliteral}{"{}Node "{}} << node  << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00052}00052       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} v: \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].first)}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00053}00053         std::cout << \textcolor{stringliteral}{"{}left parent value "{}}  << v << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00054}00054       \textcolor{keywordflow}{for} (\textcolor{keyword}{const} \textcolor{keyword}{auto} v: \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_aea36b9a2c26fa30a7741813c1f312ca6}{structure}}[node].second)}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00055}00055         std::cout << \textcolor{stringliteral}{"{}right parent value "{}}  << v << std::endl;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00056}00056       node++;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00057}00057       }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00058}00058       \textcolor{comment}{// Now we update the var\_map: for each node tau maps the index of its first}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00059}00059       \textcolor{comment}{// variable}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00060}00060       this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a74496faeecfc9bff31a63ef104cf0506}{var\_map}} = [\textcolor{keyword}{this}] (\textcolor{keyword}{const} \textcolor{keywordtype}{unsigned} tau) -\/> \textcolor{keywordtype}{unsigned}\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00061}00061         \textcolor{keywordflow}{if} (tau <= this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a3b9847e0b97fae8a6fed7ca1fdff8aab}{n\_int\_nodes}})}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00062}00062           \textcolor{keywordflow}{return} (this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_af2d818bcdbfc9b54fab21f2674822dc8}{n\_feats}} + 1) * tau;}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00063}00063         \textcolor{keywordflow}{else}\{}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00064}00064           \textcolor{comment}{// compute index of last }}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00065}00065           \textcolor{keywordtype}{unsigned} cum\_int\_idx = (this-\/>n\_int\_nodes * (this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_af2d818bcdbfc9b54fab21f2674822dc8}{n\_feats}} + 1));}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00066}00066           \textcolor{keywordflow}{return}  cum\_int\_idx + this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a83265e5dbf28623c7ea980d7785548e0}{n\_labels}} * (tau -\/ this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a3b9847e0b97fae8a6fed7ca1fdff8aab}{n\_int\_nodes}});}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00067}00067         \}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00068}00068       \};}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00069}00069     \}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00070}00070   \}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00071}00071   }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00072}00072   this-\/>\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a199bfd123a46a8606a5f5ed7f3dbe603}{n\_vars}} = (\mbox{\hyperlink{structfdpot_1_1_o_r_c_t_af2d818bcdbfc9b54fab21f2674822dc8}{n\_feats}} + 1) * \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a3b9847e0b97fae8a6fed7ca1fdff8aab}{n\_int\_nodes}} + \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a83265e5dbf28623c7ea980d7785548e0}{n\_labels}} * \mbox{\hyperlink{structfdpot_1_1_o_r_c_t_a1995a043069138ea8e93532049d85fd8}{n\_leaf\_nodes}};}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00073}00073 \};}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00074}00074 }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00075}00075 }
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00076}00076 \}; \textcolor{comment}{// namespace fdpo}}
\DoxyCodeLine{\Hypertarget{_o_r_c_t_8cpp_source_l00077}00077 }

\end{DoxyCode}
